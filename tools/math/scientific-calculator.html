<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공학용 계산기 - Utilsly</title>
    <meta name="description" content="복잡한 수식과 공학 기능을 지원하는 계산기입니다.">
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        .calculator-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .display {
            background: var(--bg-secondary);
            padding: 24px;
            text-align: right;
            border-bottom: 1px solid var(--border-color);
        }

        .history {
            font-size: 14px;
            color: var(--text-tertiary);
            min-height: 20px;
            margin-bottom: 8px;
        }

        .current-input {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
            word-break: break-all;
        }

        .keypad {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1px;
            background: var(--border-color);
        }

        .key {
            background: white;
            border: none;
            padding: 20px;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.1s;
        }

        .key:hover {
            background: var(--bg-secondary);
        }

        .key:active {
            background: #e0e0e0;
        }

        .key.operator {
            color: var(--accent-blue);
            font-weight: 700;
            background: #f8f9fa;
        }

        .key.equals {
            background: var(--accent-blue);
            color: white;
        }

        .key.equals:hover {
            background: #1976D2;
        }

        .key.clear {
            color: #FF4B4B;
        }

        .key.function {
            font-size: 14px;
            background: #f8f9fa;
            color: var(--text-secondary);
        }

        [data-theme="dark"] .calculator-container {
            background: var(--bg-sidebar);
            border-color: var(--border-color);
        }

        [data-theme="dark"] .key {
            background: var(--bg-sidebar);
            color: var(--text-primary);
        }

        [data-theme="dark"] .key:hover {
            background: #333;
        }

        [data-theme="dark"] .key.operator {
            background: #2d2d2d;
        }

        [data-theme="dark"] .key.function {
            background: #2d2d2d;
        }
    </style>
</head>

<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="user-profile">
                    <div class="avatar">U</div>
                </div>
            </div>
            <nav class="sidebar-nav">
                <!-- Sidebar content generated by js/common.js -->
            </nav>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div class="breadcrumbs">
                    <span class="breadcrumb-item">공학용 계산기</span>
                </div>
            </header>

            <div class="content-area">
                <div class="page-header">
                    <div class="header-icon-wrapper">
                        <span class="material-symbols-rounded">calculate</span>
                    </div>
                    <h1>공학용 계산기</h1>
                    <p class="description">삼각함수, 로그 등 다양한 수학 기능을 사용하세요.</p>
                </div>

                <div class="calculator-container">
                    <div class="display">
                        <div class="history" id="history"></div>
                        <div class="current-input" id="display">0</div>
                    </div>
                    <div class="keypad">
                        <button class="key function" onclick="appendFunc('sin(')">sin</button>
                        <button class="key function" onclick="appendFunc('cos(')">cos</button>
                        <button class="key function" onclick="appendFunc('tan(')">tan</button>
                        <button class="key clear" onclick="clearDisplay()">AC</button>

                        <button class="key function" onclick="appendFunc('log(')">log</button>
                        <button class="key function" onclick="appendFunc('ln(')">ln</button>
                        <button class="key function" onclick="appendFunc('sqrt(')">√</button>
                        <button class="key operator" onclick="appendOperator('/')">÷</button>

                        <button class="key" onclick="appendNumber('7')">7</button>
                        <button class="key" onclick="appendNumber('8')">8</button>
                        <button class="key" onclick="appendNumber('9')">9</button>
                        <button class="key operator" onclick="appendOperator('*')">×</button>

                        <button class="key" onclick="appendNumber('4')">4</button>
                        <button class="key" onclick="appendNumber('5')">5</button>
                        <button class="key" onclick="appendNumber('6')">6</button>
                        <button class="key operator" onclick="appendOperator('-')">-</button>

                        <button class="key" onclick="appendNumber('1')">1</button>
                        <button class="key" onclick="appendNumber('2')">2</button>
                        <button class="key" onclick="appendNumber('3')">3</button>
                        <button class="key operator" onclick="appendOperator('+')">+</button>

                        <button class="key" onclick="appendNumber('0')">0</button>
                        <button class="key" onclick="appendNumber('.')">.</button>
                        <button class="key function" onclick="appendFunc('^')">^</button>
                        <button class="key equals" onclick="calculate()">=</button>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="../../js/common.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>
    <script>
        let displayValue = '0';
        let historyValue = '';

        const display = document.getElementById('display');
        const history = document.getElementById('history');

        function updateDisplay() {
            display.textContent = displayValue;
            history.textContent = historyValue;
        }

        function appendNumber(num) {
            if (displayValue === '0' && num !== '.') {
                displayValue = num;
            } else {
                displayValue += num;
            }
            updateDisplay();
        }

        function appendOperator(op) {
            displayValue += op;
            updateDisplay();
        }

        function appendFunc(func) {
            if (displayValue === '0') {
                displayValue = func;
            } else {
                displayValue += func;
            }
            updateDisplay();
        }

        function clearDisplay() {
            displayValue = '0';
            historyValue = '';
            updateDisplay();
        }

        function calculate() {
            try {
                historyValue = displayValue + ' =';
                // Use math.js for safe evaluation
                const result = math.evaluate(displayValue);
                displayValue = result.toString();
            } catch (e) {
                displayValue = 'Error';
            }
            updateDisplay();
        }
    </script>
</body>

</html>