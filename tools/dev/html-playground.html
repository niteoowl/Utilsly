<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML 플레이그라운드 - Utilsly</title>
    <meta name="description" content="HTML, CSS, JS 코드를 실시간으로 작성하고 미리보세요.">
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        .playground-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            height: calc(100vh - 140px);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
        }

        .editors {
            display: flex;
            flex-direction: column;
            border-right: 1px solid var(--border-color);
        }

        .editor-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            border-bottom: 1px solid var(--border-color);
        }

        .editor-section:last-child {
            border-bottom: none;
        }

        .editor-header {
            padding: 8px 16px;
            background: var(--bg-sidebar);
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        textarea {
            flex: 1;
            width: 100%;
            border: none;
            padding: 16px;
            resize: none;
            font-family: var(--font-mono);
            font-size: 14px;
            line-height: 1.5;
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        textarea:focus {
            outline: none;
        }

        .preview-pane {
            background: white;
            display: flex;
            flex-direction: column;
        }

        iframe {
            flex: 1;
            width: 100%;
            border: none;
        }

        [data-theme="dark"] textarea {
            background: #1e1e1e;
            color: #e0e0e0;
        }
    </style>
</head>

<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="user-profile">
                    <div class="avatar">U</div>
                </div>
            </div>
            <nav class="sidebar-nav">
                <!-- Sidebar content generated by js/common.js -->
            </nav>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div class="breadcrumbs">
                    <span class="breadcrumb-item">HTML 플레이그라운드</span>
                </div>
            </header>

            <div class="content-area" style="padding-bottom: 0;">
                <div class="page-header" style="margin-bottom: 16px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div class="header-icon-wrapper" style="margin-bottom: 0;">
                                <span class="material-symbols-rounded">code</span>
                            </div>
                            <h1 style="margin: 0; font-size: 24px;">HTML 플레이그라운드</h1>
                        </div>
                        <button class="btn btn-primary" onclick="runCode()">
                            <span class="material-symbols-rounded"
                                style="font-size: 18px; margin-right: 4px;">play_arrow</span>
                            실행 (Run)
                        </button>
                    </div>
                </div>

                <div class="playground-container">
                    <div class="editors">
                        <div class="editor-section">
                            <div class="editor-header">HTML</div>
                            <textarea id="htmlCode" placeholder="<h1>Hello World!</h1>"></textarea>
                        </div>
                        <div class="editor-section">
                            <div class="editor-header">CSS</div>
                            <textarea id="cssCode" placeholder="h1 { color: blue; }"></textarea>
                        </div>
                        <div class="editor-section">
                            <div class="editor-header">JavaScript</div>
                            <textarea id="jsCode" placeholder="console.log('Hello');"></textarea>
                        </div>
                    </div>
                    <div class="preview-pane">
                        <div class="editor-header">Preview</div>
                        <iframe id="previewFrame"></iframe>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="../../js/common.js"></script>
    <script>
        const htmlCode = document.getElementById('htmlCode');
        const cssCode = document.getElementById('cssCode');
        const jsCode = document.getElementById('jsCode');
        const previewFrame = document.getElementById('previewFrame');

        // Load saved code
        htmlCode.value = localStorage.getItem('playground_html') || '<h1>Hello Utilsly!</h1>\n<p>Edit code on the left.</p>';
        cssCode.value = localStorage.getItem('playground_css') || 'body {\n  font-family: sans-serif;\n  padding: 20px;\n}\nh1 {\n  color: #2383E2;\n}';
        jsCode.value = localStorage.getItem('playground_js') || '// JavaScript here';

        function runCode() {
            const html = htmlCode.value;
            const css = `<style>${cssCode.value}</style>`;
            const js = `<script>${jsCode.value}<\/script>`;

            const source = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    ${css}
                </head>
                <body>
                    ${html}
                    ${js}
                </body>
                </html>
            `;

            previewFrame.srcdoc = source;

            // Save code
            localStorage.setItem('playground_html', html);
            localStorage.setItem('playground_css', cssCode.value);
            localStorage.setItem('playground_js', jsCode.value);
        }

        // Auto-run on load
        runCode();

        // Optional: Auto-run on change (debounce)
        let timeout;
        [htmlCode, cssCode, jsCode].forEach(el => {
            el.addEventListener('input', () => {
                clearTimeout(timeout);
                timeout = setTimeout(runCode, 1000);
            });
        });
    </script>
</body>

</html>