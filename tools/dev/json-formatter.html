<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON 포맷터 - Utilsly</title>
    <meta name="description" content="못생긴 JSON을 예쁘게 정렬(Pretty Print)하고 유효성을 검사해주는 도구입니다.">
    <link rel="stylesheet" href="../../css/style.css">
</head>

<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="user-profile">
                    <div class="avatar">U</div>
                    <span class="username">Utilsly</span>
                </div>
            </div>
            <nav class="sidebar-nav">
                <!-- Sidebar content generated by js/common.js -->
            </nav>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div class="breadcrumbs">
                    <span class="breadcrumb-item">Utilsly</span>
                    <span class="separator">/</span>
                    <span class="breadcrumb-item">개발</span>
                    <span class="separator">/</span>
                    <span class="breadcrumb-item current-page">JSON 포맷터</span>
                </div>
            </header>

            <div class="content-area">
                <div class="page-header">
                    <div class="header-icon-wrapper">
                        <span class="material-symbols-rounded">data_object</span>
                    </div>
                    <h1>JSON 포맷터</h1>
                    <p class="description">JSON 데이터를 예쁘게 정렬(Beautify)하거나 압축(Minify)하고 유효성을 검사합니다.</p>
                </div>

                <div class="tool-container">
                    <div style="margin-bottom: 16px; display: flex; gap: 8px;">
                        <button class="btn btn-primary" onclick="formatJSON()">포맷팅 (Beautify)</button>
                        <button class="btn" onclick="minifyJSON()">압축 (Minify)</button>
                        <button class="btn" onclick="clearAll()">지우기</button>
                    </div>
                    <div id="error-msg" style="color: #E03E3E; margin-bottom: 8px; font-size: 14px; display: none;">
                    </div>
                    <textarea id="json-input" placeholder="JSON을 여기에 붙여넣으세요..."
                        style="font-family: var(--font-mono); font-size: 14px;"></textarea>
                </div>
            </div>
        </main>
    </div>
    <script src="../../js/common.js"></script>
    <script>
        const textarea = document.getElementById('json-input');
        const errorMsg = document.getElementById('error-msg');

        function formatJSON() {
            try {
                const input = textarea.value;
                if (!input.trim()) return;
                const parsed = JSON.parse(input);
                textarea.value = JSON.stringify(parsed, null, 4);
                errorMsg.style.display = 'none';
                textarea.style.borderColor = 'var(--border-color)';
            } catch (e) {
                errorMsg.textContent = "유효하지 않은 JSON입니다: " + e.message;
                errorMsg.style.display = 'block';
                textarea.style.borderColor = '#E03E3E';
            }
        }

        function minifyJSON() {
            try {
                const input = textarea.value;
                if (!input.trim()) return;
                const parsed = JSON.parse(input);
                textarea.value = JSON.stringify(parsed);
                errorMsg.style.display = 'none';
                textarea.style.borderColor = 'var(--border-color)';
            } catch (e) {
                errorMsg.textContent = "유효하지 않은 JSON입니다: " + e.message;
                errorMsg.style.display = 'block';
                textarea.style.borderColor = '#E03E3E';
            }
        }

        function clearAll() {
            textarea.value = '';
            errorMsg.style.display = 'none';
            textarea.style.borderColor = 'var(--border-color)';
        }
    </script>
</body>

</html>